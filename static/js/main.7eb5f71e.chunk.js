(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{48:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var s=n(2),r=n.n(s),c=n(28),a=n.n(c),i=(n(48),n(16)),o=n(17),u=n(19),l=n(18),h=n(22),p=n(40),j=(n(52),n(53),p.a.initializeApp({apiKey:"AIzaSyClwyQG46rNX4WAk5ZA2oykpH7KiZZNANg",authDomain:"saylani-chatapp-55967.firebaseapp.com",projectId:"saylani-chatapp-55967",storageBucket:"saylani-chatapp-55967.appspot.com",messagingSenderId:"261735822768",appId:"1:261735822768:web:b71269b8841cc8a3055275",measurementId:"G-VTJTXW8V35"}),n(26)),b=n(4),d=(r.a.Component,n(55),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return console.log("users",this.props.users),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{style:{textAlign:"center",fontFamily:"sans-serif",fontStyle:"oblique",marginTop:"30px",fontSize:"40px",color:"blue"},children:"WELCOME TO CHAT APP"}),Object(b.jsx)("h2",{style:{textAlign:"center",fontFamily:"sans-serif"},children:"Press Login Button to Login to your Account"}),Object(b.jsx)("button",{style:{marginLeft:"570px",backgroundColor:"blue",color:"White",fontSize:"25px"},onClick:function(){return e.props.facebook_login(e.props.history)},children:"Facebook Login"})]})}}]),n}(r.a.Component)),f=Object(h.b)((function(e){return{users:e.users}}),(function(e){return{facebook_login:function(t){return e(function(e){return function(t){console.log("facebook login");var n=new j.a.auth.FacebookAuthProvider;j.a.auth().signInWithPopup(n).then((function(n){var s=n.credential,r=n.user,c={name:r.displayName,email:r.email,profile:r.photoURL,uid:r.uid};j.a.database().ref("/").child("users/".concat(r.uid)).set(c).then((function(){t({type:"SETUSER",payload:c}),alert("User Login Successful"),e.push("/chat")})),s.accessToken})).catch((function(e){e.code;var t=e.message;console.log(t),e.email,e.credential}))}}(t))}}}))(d),O=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).chat=function(t){e.setState({chat_user:t})},e.send_message=function(){e.props.current_user,e.state.chat_user;e.state.chats.push({message:e.state.message}),e.setState({chats:e.state.chats,message:""})},e.state={chat_user:{},chats:[],message:""},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.get_users()}},{key:"render",value:function(){var e=this,t=this.props.current_user;return console.log("firebase usersss",this.props.users),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{style:{textAlign:"center",fontFamily:"sans-serif",fontStyle:"oblique",marginTop:"30px",fontSize:"40px",color:"blue"},children:"WELCOME TO CHAT APP"}),Object(b.jsx)("img",{src:t.profile,alt:""}),Object(b.jsxs)("h1",{children:["User Name :",t.name]}),Object(b.jsxs)("h2",{children:[" Email Address :",t.email]}),Object(b.jsxs)("div",{style:{display:"flex",padding:"10px"},children:[Object(b.jsxs)("div",{style:{backgroundColor:"grey"},children:[Object(b.jsx)("h1",{style:{color:"blue",marginLeft:"10px"},children:"Chat Users:"}),Object(b.jsx)("ul",{children:this.props.users.map((function(n,s){return n.uid!==t.uid&&Object(b.jsxs)("li",{children:[Object(b.jsx)("img",{src:n.profile,alt:"",width:"20"}),n.name,Object(b.jsx)("button",{onClick:function(){return e.chat(n)},children:"Chat"})]},s)}))})]}),Object(b.jsxs)("div",{style:{width:400,backgroundColor:"yellow",marginLeft:"50px",padding:"20px"},children:[Object(b.jsx)("h4",{style:{color:"blue",fontSize:"30px"},children:"Chat"}),Object.keys(this.state.chat_user).length?Object(b.jsxs)("div",{children:[Object(b.jsxs)("h4",{children:[Object(b.jsx)("img",{src:this.state.chat_user.profile,alt:"",width:"20"})," ",this.state.chat_user.name]}),Object(b.jsx)("ul",{children:this.state.chats.map((function(e,t){return Object(b.jsx)("li",{children:e.message},t)}))}),Object(b.jsx)("input",{value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})},type:"text",placeholder:"Enter your message"}),Object(b.jsx)("button",{style:{marginLeft:"20px"},onClick:function(){return e.send_message()},children:"Send Message"})]}):Object(b.jsx)("h4",{children:"No user"})]})]})]})}}]),n}(r.a.Component),g=Object(h.b)((function(e){return{current_user:e.current_user,users:e.users}}),(function(e){return{get_users:function(){return e((function(e){var t=[];j.a.database().ref("/").child("users").on("child_added",(function(e){t.push(e.val())})),e({type:"SETFIREBASEUSERS",payload:t})}))}}}))(O),m=n(42),x=n(10),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsxs)(m.a,{children:[Object(b.jsx)(x.a,{exact:!0,path:"/",component:f}),Object(b.jsx)(x.a,{path:"/chat",component:g})]})}}]),n}(r.a.Component),v=(n(57),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)(y,{})})}}]),n}(r.a.Component)),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))},k=n(27),C={users:[],current_user:{}},E=n(25),_=n(43),A=Object(E.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETUSER":return Object(k.a)(Object(k.a)({},e),{},{current_user:t.payload});case"SETFIREBASEUSERS":return Object(k.a)(Object(k.a)({},e),{},{users:t.payload})}return e}),Object(E.a)(_.a));a.a.render(Object(b.jsx)(h.a,{store:A,children:Object(b.jsx)(v,{})}),document.getElementById("root")),S()}},[[58,1,2]]]);
//# sourceMappingURL=main.7eb5f71e.chunk.js.map